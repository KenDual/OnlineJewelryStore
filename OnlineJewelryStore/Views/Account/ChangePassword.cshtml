@{
   ViewBag.Title = "Change Password";
   Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
   .password-container {
      max-width: 500px;
      margin: 50px auto;
      padding: 0 20px;
   }

   .password-card {
      background: rgba(0, 0, 0, 0.8);
      border-radius: 10px;
      padding: 40px;
      box-shadow: 0 15px 25px rgba(0, 0, 0, 0.5);
   }

   .password-header {
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(255, 255, 255, 0.1);
   }

      .password-header h2 {
         color: white;
         font-size: 32px;
         margin-bottom: 10px;
      }

      .password-header p {
         color: rgba(255, 255, 255, 0.7);
         font-size: 14px;
      }

   .alert {
      padding: 12px 20px;
      margin-bottom: 20px;
      border-radius: 5px;
      font-size: 14px;
   }

   .alert-success {
      background-color: rgba(40, 167, 69, 0.9);
      color: white;
   }

   .alert-danger {
      background-color: rgba(220, 53, 69, 0.9);
      color: white;
   }

   .form-group {
      margin-bottom: 25px;
   }

      .form-group label {
         display: block;
         color: white;
         font-size: 16px;
         margin-bottom: 8px;
         letter-spacing: 1px;
      }

   .form-control {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      color: #03a9f4;
      background: transparent;
      border: none;
      border-bottom: 2px solid rgba(255, 255, 255, 0.5);
      outline: none;
      transition: 0.3s;
   }

      .form-control:focus {
         border-bottom-color: #03a9f4;
      }

   .password-requirements {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 5px;
      padding: 15px;
      margin-bottom: 25px;
   }

      .password-requirements h4 {
         color: #03a9f4;
         font-size: 14px;
         margin-bottom: 10px;
         text-transform: uppercase;
         letter-spacing: 1px;
      }

      .password-requirements ul {
         list-style: none;
         padding: 0;
      }

      .password-requirements li {
         color: rgba(255, 255, 255, 0.7);
         font-size: 13px;
         margin-bottom: 5px;
         padding-left: 20px;
         position: relative;
      }

         .password-requirements li:before {
            content: "•";
            color: #03a9f4;
            position: absolute;
            left: 0;
         }

   .btn-group {
      display: flex;
      gap: 15px;
      margin-top: 30px;
   }

   .btn {
      flex: 1;
      background: #3498db;
      background-image: linear-gradient(to bottom, #3498db, #2980b9);
      border-radius: 17px;
      color: #ffffff;
      font-size: 16px;
      padding: 12px 20px;
      border: none;
      cursor: pointer;
      text-decoration: none;
      transition: 0.3s;
      text-align: center;
      display: inline-block;
   }

      .btn:hover {
         background: #3cb0fd;
         background-image: linear-gradient(to bottom, #3cb0fd, #3498db);
         transform: translateY(-2px);
         box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
         color: white;
         text-decoration: none;
      }

   .btn-secondary {
      background: #6c757d;
      background-image: linear-gradient(to bottom, #6c757d, #5a6268);
   }

      .btn-secondary:hover {
         background: #5a6268;
         background-image: linear-gradient(to bottom, #5a6268, #4e555b);
      }

   .show-password {
      position: relative;
   }

   .toggle-password {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      font-size: 14px;
      user-select: none;
   }

      .toggle-password:hover {
         color: #03a9f4;
      }
</style>

<div class="password-container">
   <div class="password-card">
      <div class="password-header">
         <h2>Change Password</h2>
         <p>Update your account password</p>
      </div>

      @if (TempData["SuccessMessage"] != null)
      {
         <div class="alert alert-success">
            @TempData["SuccessMessage"]
         </div>
      }

      @if (ViewBag.Error != null)
      {
         <div class="alert alert-danger">
            @ViewBag.Error
         </div>
      }

      @using (Html.BeginForm("ChangePassword", "Account", FormMethod.Post))
      {
         @Html.AntiForgeryToken()

         <div class="form-group">
            <label>Current Password</label>
            <input type="password" name="oldPassword" class="form-control" required />
         </div>

         <div class="form-group">
            <label>New Password</label>
            <input type="password" name="newPassword" id="newPassword" class="form-control" required />
         </div>

         <div class="form-group">
            <label>Confirm New Password</label>
            <input type="password" name="confirmPassword" id="confirmPassword" class="form-control" required />
         </div>

         <div class="password-requirements">
            <h4>Password Requirements</h4>
            <ul>
               <li>Minimum 6 characters long</li>
               <li>Should be different from current password</li>
               <li>Both password fields must match</li>
            </ul>
         </div>

         <div class="btn-group">
            <button type="submit" class="btn">Change Password</button>
            @Html.ActionLink("Back to Profile", "Profile", null, new { @class = "btn btn-secondary" })
         </div>
      }
   </div>
</div>

<script>
   // Optional: Add password visibility toggle
   document.addEventListener('DOMContentLoaded', function () {
      // Validate password match
      document.getElementById('confirmPassword').addEventListener('input', function () {
         var password = document.getElementById('newPassword').value;
         var confirmPassword = this.value;

         if (password !== confirmPassword && confirmPassword !== '') {
            this.style.borderBottomColor = '#ff6b6b';
         } else if (confirmPassword !== '') {
            this.style.borderBottomColor = '#03a9f4';
         }
      });
   });
</script>